<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start" class="header-btns">
      <ion-menu-toggle>
          <ion-icon mode="ios" name="bookmarks"></ion-icon>
      </ion-menu-toggle>
    </ion-buttons>
    <ion-buttons slot="end" class="header-btns">
      <ion-button fill="clear" (click)="popRunningManager($event)">
        <ion-icon mode="ios" name="pulse"></ion-icon>
      </ion-button>
      <ion-button [routerLink]="['/my']">
        <ion-icon mode="ios" name="person"></ion-icon>
      </ion-button>
      <span class="point" *ngIf="appManager.runningList.length > 0"></span>
    </ion-buttons>
    
    <ion-progress-bar *ngIf="appManager.installing" type="indeterminate"></ion-progress-bar>

    {{appManager.runningList.length}}

   <!--    <ion-button fill="clear" (click)="openScan()">
        <ion-icon slot="icon-only" name="scan"> </ion-icon>
      </ion-button>

      <ion-button
        fill="clear"
        [routerLink]="['/my']"
        routerDirection="forward"
        (ionFocus)="touched = true"
        (ionBlur)="touched = false"
      >
        <ion-icon
          slot="icon-only"
          [name]="touched ? 'my-light' : 'my-dark'"
        ></ion-icon>
      </ion-button> -->

    <!--   <ion-button slot="start" fill="clear" (click)="popoRunningManager($event)">
        <ion-icon
          slot="icon-only"
          [name]="popup ? 'switch-light' : 'switch-dark'"
        ></ion-icon>
      </ion-button> -->
  </ion-toolbar>

</ion-header>

<ion-content no-margin no-padding>
  
  <!-- <div class="sidenav" padding-top>
    <ion-grid>
      <ion-row *ngFor="let row of appManager.rows" align-items-center>
        <ion-col
          size="3"
          align-self:center
          *ngFor="let id of row; let i = index"
        >
          <div class="app-layout" (click)="onClick(id)">
            <img
              [src]="appManager.sanitize(appManager.appInfos[id].icons[0].src)"
              alt=""
            />
            <p>{{ appManager.appInfos[id].name }}</p>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div> -->

  <div id="home-bg" padding>
    <ion-card class="apps-card" *ngFor="let section of sections">
      <ion-row class="app-header" padding>
        <ion-col size="9" class="section-title" padding><p>{{ section }}</p></ion-col>
        <ion-col size="3" class="section-btn" padding><p> View All</p></ion-col>
      </ion-row>

      <div *ngIf="section === 'Browsed'">
        <ion-grid no-padding>
          <ion-row *ngFor="let app of appManager.browsedApps">
            <ion-col size="2.5" size-lg="2.5" class="img-container" (click)="findApp(app.id)">
            <img [src]="appManager.sanitize(app.icons[0].src)"/>
            </ion-col>

            <ion-col size="8" size-xs="8" class="dapp-content" (click)="findApp(app.id)">
              <ion-label>
                <h2>{{ app.name }}</h2>
                <p>{{ app.description.slice(0,70) }}...</p>
              </ion-label>
            </ion-col>

           <!--  <ion-col size="1.75" class="checkbox-container">
              <ion-checkbox value="app" [(ngModel)]="app.isFav" (ngModelChange)="favApp(app)" mode="ios"></ion-checkbox>
            </ion-col> -->
          </ion-row>
        </ion-grid>
      </div>

      <div *ngIf="section === 'Installed'">
        <ion-grid no-padding>
          <ion-row *ngFor="let app of appManager.installedApps">
            <ion-col size="2.5" size-lg="2.5" class="img-container" (click)="findApp(app.id)">
            <img [src]="appManager.sanitize(app.icons[0].src)"/>
            </ion-col>

            <ion-col size="8" size-xs="8" class="dapp-content" (click)="findApp(app.id)">
              <ion-label>
                <h2>{{ app.name }}</h2>
                <p>{{ app.description.slice(0,70) }}...</p>
              </ion-label>
            </ion-col>

            <ion-col size="1.5" class="checkbox-container">
              <ion-checkbox value="app" [(ngModel)]="app.isFav" (ngModelChange)="favApp(app)" mode="ios"></ion-checkbox>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <div *ngIf="section === 'Favorites'">
        <ion-grid no-padding>
          <ion-row *ngFor="let app of getFavApps()">

            <ion-col size="2.5" size-lg="2.5" class="img-container" (click)="findApp(app.id)">
              <img [src]="appManager.sanitize(app.icons[0].src)"/>
            </ion-col>

            <ion-col size="8" size-xs="8" class="dapp-content" (click)="findApp(app.id)">
              <ion-label>
                <h2>{{ app.name }}</h2>
                <p>{{ app.description.slice(0,70) }}...</p>
              </ion-label>
            </ion-col>

            <ion-col size="1.50" class="checkbox-container">
              <ion-checkbox [(ngModel)]="app.isFav" (ngModelChange)="favApp(app)" mode="ios"></ion-checkbox>
            </ion-col>

          </ion-row>
        </ion-grid>
      </div>
    </ion-card>
  </div>
  
</ion-content>
